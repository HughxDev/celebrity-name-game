<html>
  <template id="celeb-game-movie-actors">
    <style>
      :host {
        display: block;

        --card__nominal-width: 276px;
        --card__nominal-height: 350px;
        --card__downres-factor: 2;

        --card__width: calc( var( --card__nominal-width ) / var( --card__downres-factor ) );
        --card__height: calc( var( --card__nominal-height ) / var( --card__downres-factor ) );
      
        --list-item__margin: 0.25rem;
      }

      img {
        max-width: 100%;
      }

      .list {
        padding: 0;
        margin: var( --list-item__margin ) auto;
        width: calc( ( var( --card__width ) * 2 ) + ( var( --list-item__margin ) * 4 ) );
      }

      .list.list--cards {
        width: 50%;
      }

      .list__item {
        display: inline-block;
        vertical-align: middle;
        margin: var( --list-item__margin );
      }

      .list__item.list__item--card {
        width: var( --card__width );
        height: var( --card__height );
      }

      /*button*/.actor {
        -moz-appearance: none;
        -webkit-appearance: none;
        appearance: none;

        background-color: #eee;

        cursor: pointer;

        border: 0;
        margin: 0;
        padding: 0;

        width: 100%;
        height: 100%;
      }

      .actor:hover,
      .actor:active {
        outline: none;
      }
    </style>
    <ul id="cards" class="list">
      <!--
        <li class="list__item">
          <button class="actor">
            <img/>
          </button>
        </li>
      -->
    </ul>
  </template>
  <script>//<![CDATA[
    (function () {
      "use strict";

      var ownerDocument = document.currentScript.ownerDocument;

      class CelebGameMovieActors extends HTMLElement {
        set actors( data ) {
          this._actors = data;
          this.render();
        }

        get actors() {
          return this._actors;
        }
        
        // Remember to call the super method here
        constructor() {
          super();

          const $shadowRoot = this.attachShadow({
            "mode": "open"
          });
          const $CelebGameMovieActors = ownerDocument.querySelector( '#celeb-game-movie-actors' );
          const $shadowContent = $CelebGameMovieActors.content.cloneNode( true );

          $shadowRoot.appendChild( $shadowContent );

          // @todo: Implement in tmdb.js
          this._imagesUrlPrefix = 'https://image.tmdb.org/t/p/w276_and_h350_bestv2/';

          this._cardNominalWidth = 276;
          this._cardNominalHeight = 350;
          this._cardDownresFactor = 2;

          this.$cards = this.shadowRoot.querySelector( '#cards' );
        }

        connectedCallback() {
          if ( !!this.actors && this.actors.length ) {
            this.render();
          }
        }

        renderActors() {
          this.actors.forEach( ( actor ) => {
            var $li = ownerDocument.createElement( 'li' );
            var $button = ownerDocument.createElement( 'button' );
            var $img = ownerDocument.createElement( 'img' );

            $img.src = this._imagesUrlPrefix + actor.profile_path;
            $img.width = ( this._cardNominalWidth / this._cardDownresFactor );
            $img.height = ( this._cardNominalHeight / this._cardDownresFactor );

            $button.classList.add( 'actor' );
            $li.classList.add( 'list__item', 'list__item--card' );

            $button.appendChild( $img );
            $li.appendChild( $button );

            this.$cards.appendChild( $li );
          } );

          // $actors.innerHTML += actorsHTML;
        }

        renderNames() {
          this.actors.forEach( ( actor ) => {
            var $li = ownerDocument.createElement( 'li' );
            var $button = ownerDocument.createElement( 'button' );

            $button.classList.add( 'actor', 'actor--name' );
            $button.textContent = actor.name;

            $li.classList.add( 'list__item', 'list__item--card' );

            $li.appendChild( $button );

            this.$cards.appendChild( $li );
          } );

          // $actors.innerHTML += actorsHTML;
        }

        render() {
          this.renderActors();
          this.renderNames();
        }
      }

      window.customElements.define( 'celeb-game-movie__actors', CelebGameMovieActors );
    })();
  //]]></script>
</html>